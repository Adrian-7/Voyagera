<!doctype html>
<html class="no-js" lang="zxx">

<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <title>Voyagera - AgenÈ›ia de turism la care visezi</title>        
    
    <!-- Mobile Specific Metas -->
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Favicons - Place favicon.ico in the root directory -->
    <link rel="icon" type="image/svg" sizes="32x32" href="assets/img/logotip2.svg">

    <!--==============================
	  Google Fonts
	============================== -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@100..900&family=Manrope:wght@200..800&family=Montez&display=swap" rel="stylesheet">

    <!--==============================
	    All CSS File
	============================== -->
    <!-- Bootstrap -->
    <link rel="stylesheet" href="assets/css/bootstrap.min.css">
    <!-- Fontawesome Icon -->
    <link rel="stylesheet" href="assets/css/fontawesome.min.css">
    <!-- Magnific Popup -->
    <link rel="stylesheet" href="assets/css/magnific-popup.min.css">

    <!-- Swiper css -->
    <link rel="stylesheet" href="assets/css/swiper-bundle.min.css">
    <!-- Theme Custom CSS -->
    <link rel="stylesheet" href="assets/css/style.css">

</head>

<body>


    <!--==============================
     Preloader
  ==============================-->
    <div id="preloader" class="preloader ">
        <button class="th-btn preloaderCls">AnuleazÄƒ </button>
        <div class="preloader-inner">
            <img src="assets/img/logotip2.svg" alt="">
        </div>

        <div id="loader" class="th-preloader">
            <div class="animation-preloader">
                <div class="txt-loading">
                    <span preloader-text="V" class="characters">V </span>

                    <span preloader-text="O" class="characters">O </span>

                    <span preloader-text="Y" class="characters">Y </span>

                    <span preloader-text="A" class="characters">A </span>

                    <span preloader-text="G" class="characters">G </span>

                    <span preloader-text="E" class="characters">E </span>

                    <span preloader-text="R" class="characters">R </span>

                    <span preloader-text="A" class="characters">A </span>
                </div>
            </div>
        </div>

    </div> 
<!--==============================
	Header Area
==============================-->
    <header class="th-header header-layout1">
        <div class="sticky-wrapper">
            <!-- Main Menu Area -->
            <div class="menu-area">
                <div class="container th-container">
                    <div class="row align-items-center justify-content-between">
                        <div class="col-auto">
                            <div class="header-logo">
                                <a href="home-travel.html"><img src="assets/img/logotip.svg" alt="Voyagera"></a>
                            </div>
                        </div>
                        <div class="col-auto me-xl-auto">
                            <nav class="main-menu d-none d-xl-inline-block">
                                <ul>
                                    <li><a href="tour.html">Oferte fierbinÈ›i</a></li>
                                        <li class="menu-item-has-children">
                                    <li><a href="destination.html">DestinaÈ›ii</a></li>
                                        <li class="menu-item-has-children"></li>
                                    <li><a href="hotels.html">Hoteluri</a></li>
                                        <li class="menu-item-has-children">        
                                    <li><a href="about.html">Despre Noi</a></li>
                                        <li class="menu-item-has-children">
                                    <li><a href="contact.html">Contacte</a></li>
                                        <li class="menu-item-has-children">        
                                </ul>
                            </nav>
                            <button type="button" class="th-menu-toggle d-block d-xl-none"><i class="far fa-bars"></i></button>
                        </div>
                        <div class="col-auto d-none d-xl-block">
                            <div class="header-button">
                                <a href="contact.html" class="th-btn style3 th-icon">RezervÄƒ</a>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="logo-bg" data-mask-src="assets/img/logo_bg_mask.png"></div>
            </div>
        </div>
    </header>
    <!--==============================
    Breadcumb
============================== -->
    <div class="breadcumb-wrapper " data-bg-src="assets/img/bg/breadcumb-bg.jpg">
        <div class="container">
            <div class="breadcumb-content">
                <h1 class="breadcumb-title">Rezervare</h1>
                <ul class="breadcumb-menu">
                    <li><a href="home-travel.html">AcasÄƒ</a></li>
                    <li>Rezervare</li>
                </ul>
            </div>
        </div>
    </div><!--==============================
Checkout Arae
==============================-->
<div class="margin-top">
    <h3 class="text-center mt-n2 mb-30">Datele clientului:</h3>
</div>
    <div class="th-checkout-wrapper space-top space-extra-bottom" style="padding-top: 0;">
        <div class="container">
                <div class="row">
                    <div class="col-12">
                        <form action="#" class="woocommerce-form-login">
                            <div class="form-group">
                                <label>Nume *</label>
                                <input type="text" class="form-control" placeholder="Nume" id="input-nume">
                            </div>
                            <div class="form-group">
                                <label>Prenume *</label>
                                <input type="text" class="form-control" placeholder="Prenume" id="input-prenume">
                            </div>
                            <div class="form-group">
                                <label>Email *</label>
                                <input type="text" class="form-control" placeholder="Email" id="input-email">
                            </div>
                            <div class="form-group">
                                <label>Telefon *</label>
                                <input type="text" class="form-control" placeholder="Telefon" id="input-telefon">
                            </div>
                            
                            <div class="form-group" id="formular-rezervare">
                                <button type="button" class="th-btn" onclick="trimiteClientul()">Treci la Rezervare</button>
                            </div>
                        </form>
                    </div>
                </div>
            <div class="woocommerce-form-coupon-toggle">
                <div class="woocommerce-info">Te rugÄƒm sÄƒ introduci date corecte. DupÄƒ rezervare vei fi contactat Ã®n cel mai scurt timp posibil!
                </div>
            </div>
            <div class="row">
                <div class="col-12">
                </div>
            </div>
            <form action="#" class="woocommerce-checkout mt-40">
                <div class="row ">
                    <div class="col-lg-6">
                        <h2 class="h4">Detalii Rezervare</h2>
                        <div class="row">
                            <div class="col-12 form-group">
                                <input type="text" class="form-control" placeholder="DestinaÈ›ie">
                                <input type="text" class="form-control" placeholder="Tip vacanÈ›Äƒ">
                                <input type="text" class="form-control" placeholder="Transport">
                            </div>
                            <div class="col-md-6 form-group">
                                <input type="text" class="form-control" placeholder="Nr. Persoane">
                            </div>
                            <div class="col-md-6 form-group">
                                <input type="text" class="form-control" placeholder="DuratÄƒ" id="durata-zile">
                            </div>
                            <div class="col-12 form-group">
                                <input type="text" class="form-control" placeholder="Hotel" id="hotel-nume">
                                <input type="date" class="form-control" placeholder="Data plecare" id="data-checkin">
                                <input type="date" class="form-control" placeholder="Data Ã®ntoarcere" id="data-checkout" readonly>
                            </div>
                            <div class="col-md-6 form-group">
                                <input type="text" class="form-control" placeholder="Prenume" id="rezervare-prenume">
                            </div>
                            <div class="col-md-6 form-group">
                                <input type="text" class="form-control" placeholder="Nume" id="rezervare-nume">
                            </div>
                            <div class="col-12 form-group">
                                <input type="text" class="form-control" placeholder="Email" id="rezervare-email">
                                <input type="text" class="form-control" placeholder="Telefon" id="rezervare-telefon">
                            </div>
                            <div class="col-12 form-group">
                                <button type="button" class="th-btn" onclick="calculeazaVacanta()">CalculeazÄƒ vacanÈ›a</button>
                                <div class="form-group mt-3">
                                    <label for="totalVacantaInput">PreÈ› Total VacanÈ›Äƒ</label>
                                    <input type="text" id="totalVacantaInput" class="form-control" readonly placeholder="PreÈ›ul va apÄƒrea aici">
                                  </div>                                  
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-6">
                        <img src="assets/img/gallery/gallery_1_4.jpg" alt="" srcset="">
                    </div>
                </div>
            </form>
            <div class="mt-lg-3 mb-30">
                <div class="woocommerce-checkout-payment">                  
                    <form onsubmit="trimiteRezervarea(event)">
                    <div class="form-row place-order">
                        <button type="submit" class="th-btn">PlaseazÄƒ comanda</button>
                    </div>
                </form>
                </div>
            </div>
        </div>
    </div><!--==============================
	Footer Area
==============================-->
<footer class="footer-wrapper bg-title footer-layout2">
    <div class="widget-area">
        <div class="container">
            <div class="row justify-content-between">
                <div class="col-md-6 col-xl-3">
                    <div class="widget footer-widget">
                        <div class="th-widget-about">
                            <div class="about-logo">
                                <a href="home-travel.html"><img src="assets/img/logotip.svg" alt="voyagera"></a>
                            </div>
                            <p class="about-text">DescoperÄƒ destinaÈ›ii fascinante cu Voyagera â€“ vacanÈ›e bine organizate, oferte avantajoase È™i amintiri de neuitat.</p>
                            <div class="th-social">
                                <a href="https://www.facebook.com/"><i class="fab fa-facebook-f"></i></a>
                                <a href="https://www.twitter.com/"><i class="fab fa-twitter"></i></a>
                                <a href="https://www.linkedin.com/"><i class="fab fa-linkedin-in"></i></a>
                                <a href="https://www.whatsapp.com/"><i class="fab fa-whatsapp"></i></a>
                                <a href="https://instagram.com/"><i class="fab fa-instagram"></i></a>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-md-6 col-xl-auto">
                    <div class="widget widget_nav_menu footer-widget">
                        <h3 class="widget_title">Link-uri rapide</h3>
                        <div class="menu-all-pages-container">
                            <ul class="menu">

                                <li><a href="home-travel.html">AcasÄƒ</a></li>
                                <li><a href="tour.html">Oferte fierbinÈ›i</a></li>
                                <li><a href="hotels.html">Hoteluri</a></li>
                                <li><a href="about.html">Despre noi</a></li>
                                <li><a href="contact.html">Contacte</a></li>
                            </ul>
                        </div>
                    </div>
                </div>
                <div class="col-md-6 col-xl-auto">
                    <div class="widget footer-widget">
                        <h3 class="widget_title">LuaÈ›i legÄƒtura</h3>
                        <div class="th-widget-contact">
                            <div class="info-box_text">
                                <div class="icon">
                                    <img src="assets/img/icon/phone.svg" alt="img">
                                </div>
                                <div class="details">
                                    <p><a href="tel:+373 061 135 488" class="info-box_link">+373 061 135 488</a></p>
                                    <p><a href="tel:+373 079 672 134" class="info-box_link">+373 079 672 134</a></p>
                                </div>
                            </div>
                            <div class="info-box_text">
                                <div class="icon">
                                    <img src="assets/img/icon/envelope.svg" alt="img">
                                </div>
                                <div class="details">
                                    <p><a href="mailto:mailinfo00@voyagera.com" class="info-box_link">info@voyagera.com</a></p>
                                    <p><a href="mailto:support24@voyagera.com" class="info-box_link">support@voyagera.com</a></p>
                                </div>
                            </div>
                            <div class="info-box_text">
                                <div class="icon"><img src="assets/img/icon/location-dot.svg" alt="img"></div>
                                <div class="details">
                                    <p>Strada Alexandru cel Bun 126/1, ChiÈ™inÄƒu, Moldova</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-md-6 col-xl-auto">
                    <div class="widget footer-widget">
                        <h3 class="widget_title">PostÄƒri pe Instagram</h3>
                        <div class="sidebar-gallery">
                            <div class="gallery-thumb">
                                <img src="assets/img/widget/gallery_1_1.jpg" alt="Gallery Image">
                                <a target="_blank" href="https://www.instagram.com/" class="gallery-btn"><i class="fab fa-instagram"></i></a>
                            </div>
                            <div class="gallery-thumb">
                                <img src="assets/img/widget/gallery_1_2.jpg" alt="Gallery Image">
                                <a target="_blank" href="https://www.instagram.com/" class="gallery-btn"><i class="fab fa-instagram"></i></a>
                            </div>
                            <div class="gallery-thumb">
                                <img src="assets/img/widget/gallery_1_3.jpg" alt="Gallery Image">
                                <a target="_blank" href="https://www.instagram.com/" class="gallery-btn"><i class="fab fa-instagram"></i></a>
                            </div>
                            <div class="gallery-thumb">
                                <img src="assets/img/widget/gallery_1_4.jpg" alt="Gallery Image">
                                <a target="_blank" href="https://www.instagram.com/" class="gallery-btn"><i class="fab fa-instagram"></i></a>
                            </div>
                            <div class="gallery-thumb">
                                <img src="assets/img/widget/gallery_1_5.jpg" alt="Gallery Image">
                                <a target="_blank" href="https://www.instagram.com/" class="gallery-btn"><i class="fab fa-instagram"></i></a>
                            </div>
                            <div class="gallery-thumb">
                                <img src="assets/img/widget/gallery_1_6.jpg" alt="Gallery Image">
                                <a target="_blank" href="https://www.instagram.com/" class="gallery-btn"><i class="fab fa-instagram"></i></a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="copyright-wrap" data-bg-src="assets/img/bg/footer.jpg">
        <div class="container">
            <div class="row justify-content-center">
                <div class="col-12 text-center">
                    <p class="copyright-text">Copyright 2025 <a href="home-travel.html">Voyagera.</a> Toate drepturile rezervate.</p>
                </div>
                <div class="col-md-6 text-end d-none d-md-block">
                </div>
            </div>

        </div>
    </div>
    <div class="shape-mockup movingX d-none d-xxl-block" data-top="24%" data-left="5%">
        <img src="assets/img/shape/shape_8.png" alt="shape">
    </div>
</footer>

    <!--********************************
			Code End  Here 
	******************************** -->

    <!-- Scroll To Top -->
    <div class="scroll-top">
        <svg class="progress-circle svg-content" width="100%" height="100%" viewBox="-1 -1 102 102">
            <path d="M50,1 a49,49 0 0,1 0,98 a49,49 0 0,1 0,-98" style="transition: stroke-dashoffset 10ms linear 0s; stroke-dasharray: 307.919, 307.919; stroke-dashoffset: 307.919;">
            </path>
        </svg>
    </div>
    

    <script>
function trimiteClientul() {
  const nume = document.querySelector('#input-nume');
  const prenume = document.querySelector('#input-prenume');
  const email = document.querySelector('#input-email');
  const telefon = document.querySelector('#input-telefon');

  const valNume = nume.value.trim();
  const valPrenume = prenume.value.trim();
  const valEmail = email.value.trim();
  const valTelefon = telefon.value.trim();

  // Resetare stil bordurÄƒ
  [nume, prenume, email, telefon].forEach(input => {
    input.style.border = "1px solid #ccc";
  });

  // âœ… ValidÄƒri
  const doarLitere = /^[a-zA-ZÄƒÃ®Ã¢È™È›Ä‚ÃŽÃ‚È˜Èš]+$/;
  const emailValid = /^[a-zA-Z0-9._%+-]+@gmail\.com$/;
  const doarCifre = /^\d{9}$/;

  if (!doarLitere.test(valNume)) {
    alert("Numele trebuie sÄƒ conÈ›inÄƒ doar litere.");
    nume.style.border = "2px solid red";
    return;
  }

  if (!doarLitere.test(valPrenume)) {
    alert("Prenumele trebuie sÄƒ conÈ›inÄƒ doar litere.");
    prenume.style.border = "2px solid red";
    return;
  }

  if (!emailValid.test(valEmail)) {
    alert("Emailul trebuie sÄƒ fie valid È™i sÄƒ conÈ›inÄƒ @gmail.com.");
    email.style.border = "2px solid red";
    return;
  }

  if (!doarCifre.test(valTelefon)) {
    alert("Telefonul trebuie sÄƒ conÈ›inÄƒ exact 9 cifre.");
    telefon.style.border = "2px solid red";
    return;
  }

  // ðŸ”’ DacÄƒ toate sunt valide, continuÄƒm
  const client = {
    nume: valNume,
    prenume: valPrenume,
    email: valEmail,
    telefon: valTelefon
  };

  sessionStorage.setItem("clientNume", valNume);
  sessionStorage.setItem("clientPrenume", valPrenume);
  sessionStorage.setItem("clientEmail", valEmail);
  sessionStorage.setItem("clientTelefon", valTelefon);

  fetch('http://localhost:8080/clienti', {
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify(client)
  })
    .then(res => {
      if (!res.ok) throw new Error("Eroare");

      document.getElementById("rezervare-prenume").value = valPrenume;
      document.getElementById("rezervare-nume").value = valNume;
      document.getElementById("rezervare-email").value = valEmail;
      document.getElementById("rezervare-telefon").value = valTelefon;

      document.getElementById('formular-rezervare').scrollIntoView({ behavior: 'smooth' });
    })
    .catch(err => {
      alert("Eroare la trimitere!");
      console.error(err);
    });
}
        
        document.addEventListener("DOMContentLoaded", () => {
            const prenume = sessionStorage.getItem("clientPrenume");
  const nume = sessionStorage.getItem("clientNume");
  const email = sessionStorage.getItem("clientEmail");
  const telefon = sessionStorage.getItem("clientTelefon");

  if (document.getElementById("rezervare-prenume") && prenume)
    document.getElementById("rezervare-prenume").value = prenume;
  if (document.getElementById("rezervare-nume") && nume)
    document.getElementById("rezervare-nume").value = nume;
  if (document.getElementById("rezervare-email") && email)
    document.getElementById("rezervare-email").value = email;
  if (document.getElementById("rezervare-telefon") && telefon)
    document.getElementById("rezervare-telefon").value = telefon;

  // È˜tergem dupÄƒ ce le-am folosit
  sessionStorage.removeItem("clientPrenume");
  sessionStorage.removeItem("clientNume");
  sessionStorage.removeItem("clientEmail");
  sessionStorage.removeItem("clientTelefon");
        });

        document.addEventListener("DOMContentLoaded", () => {
  const params = new URLSearchParams(window.location.search);
  const hotelId = params.get("id");

  if (hotelId) {
    fetch(`http://localhost:8080/hoteluri/${hotelId}`)
      .then(res => {
        if (!res.ok) throw new Error("Hotelul nu a fost gÄƒsit");
        return res.json();
      })
      .then(data => {
        document.getElementById("hotel-nume").value = data.nume_hotel;
      })
      .catch(err => {
        console.error("Eroare la aducerea hotelului:", err);
      });
  }
});

document.addEventListener("DOMContentLoaded", () => {
  const destinatie = sessionStorage.getItem("rez_destinatie");
  const tip = sessionStorage.getItem("rez_tip");
  const durata = sessionStorage.getItem("rez_durata");
  const transport = sessionStorage.getItem("rez_transport");
  const nrPersoane = sessionStorage.getItem("rez_persoane");

  // Introduce valorile Ã®n inputuri (folosind placeholder)
  const inputs = document.querySelectorAll('input.form-control');

  inputs.forEach(input => {
    switch (input.placeholder) {
      case "DestinaÈ›ie":
        input.value = destinatie || "";
        break;
      case "Tip vacanÈ›Äƒ":
        input.value = tip || "";
        break;
      case "Transport":
        input.value = transport || "";
        break;
      case "Nr. Persoane":
        input.value = nrPersoane || "";
        break;
      case "DuratÄƒ":
        input.value = durata ? `${durata} zile` : "";
        break;
    }
  });
});


document.addEventListener("DOMContentLoaded", () => {
  const checkinInput = document.getElementById("data-checkin");
  const durataInput = document.getElementById("durata-zile");
  const checkoutInput = document.getElementById("data-checkout");

  function calculeazaCheckout() {
    const dataCheckin = checkinInput.value;
    const durata = parseInt(durataInput.value);

    if (dataCheckin && durata && !isNaN(durata)) {
      const dataStart = new Date(dataCheckin);
      dataStart.setDate(dataStart.getDate() + durata);

      // FormatÄƒm Ã®n yyyy-mm-dd
      const dataCheckout = dataStart.toISOString().split('T')[0];
      checkoutInput.value = dataCheckout;
    } else {
      checkoutInput.value = "";
    }
  }

  // CÃ¢nd se schimbÄƒ data sau durata, recalculeazÄƒ automat
  checkinInput.addEventListener("change", calculeazaCheckout);
  durataInput.addEventListener("input", calculeazaCheckout);

  // dacÄƒ durata este deja setatÄƒ din altÄƒ parte
  if (checkinInput.value && durataInput.value) {
    calculeazaCheckout();
  }
});


async function calculeazaVacanta() {
  try {
    const hotelId = new URLSearchParams(window.location.search).get("id");
    const nrPers = parseInt(document.querySelector('input[placeholder="Nr. Persoane"]').value);
    const durata = parseInt(document.querySelector('input[placeholder="DuratÄƒ"]').value);
    const tara = document.querySelector('input[placeholder="DestinaÈ›ie"]').value.trim();
    const tipTransport = document.querySelector('input[placeholder="Transport"]').value.trim();

    if (!hotelId || !nrPers || !durata || !tara || !tipTransport) {
      alert("CompleteazÄƒ toate cÃ¢mpurile!");
      return;
    }

    // ðŸ”¹ 1. Ia preÈ›ul hotelului
    const hotelRes = await fetch(`http://localhost:8080/hoteluri/${hotelId}`);
    const hotel = await hotelRes.json();
    const pretHotel = hotel.pret_pe_noapte;

    // ðŸ”¹ 2. CautÄƒ id_destinatie pentru tara
    const destinatiiRes = await fetch("http://localhost:8080/destinatii");
    const destinatii = await destinatiiRes.json();
    const destinatie = destinatii.find(d => d.tara.toLowerCase() === tara.toLowerCase());

    if (!destinatie) {
      alert("DestinaÈ›ia nu a fost gÄƒsitÄƒ.");
      return;
    }

    const idDestinatie = destinatie.id_destinatie;

    // ðŸ”¹ 3. CautÄƒ transportul corect dupÄƒ id_destinatie + tipTransport
    const transporturiRes = await fetch("http://localhost:8080/transporturi");
    const transporturi = await transporturiRes.json();

    const transport = transporturi.find(t =>
      t.destinatie.id_destinatie === idDestinatie &&
      t.tipTransport.toLowerCase() === tipTransport.toLowerCase()
    );

    if (!transport) {
      alert("Nu s-a gÄƒsit transport pentru destinaÈ›ia È™i tipul selectat.");
      return;
    }

    const pretTransport = transport.pret_transport;

    // ðŸ”¹ 4. CalculeazÄƒ preÈ›ul total
    const total = (pretHotel * durata * nrPers) + (pretTransport * nrPers);

    // ðŸ”¹ 5. AfiÈ™eazÄƒ Ã®n input
    const totalInput = document.getElementById("totalVacantaInput");
    if (totalInput) {
      totalInput.value = `${total.toFixed(2)} MDL`;
    }

  } catch (err) {
    console.error("Eroare la calcul:", err);
    alert("A apÄƒrut o eroare la calcul.");
  }
}


async function trimiteRezervarea(event) {
  event.preventDefault(); // prevenim refreshul

  const hotelId = new URLSearchParams(window.location.search).get("id");
  const tara = document.querySelector('input[placeholder="DestinaÈ›ie"]').value.trim();
  const tipVacanta = document.querySelector('input[placeholder="Tip vacanÈ›Äƒ"]').value.trim();
  const tipTransport = document.querySelector('input[placeholder="Transport"]').value.trim();
  const nrPersoane = parseInt(document.querySelector('input[placeholder="Nr. Persoane"]').value);
  const durata = parseInt(document.querySelector('input[placeholder="DuratÄƒ"]').value);
  const dataCheckin = document.querySelectorAll('input[type="date"]')[0].value;

  const prenume = document.getElementById("rezervare-prenume").value.trim();
  const nume = document.getElementById("rezervare-nume").value.trim();
  const email = document.getElementById("rezervare-email").value.trim();
  const telefon = document.getElementById("rezervare-telefon").value.trim();

  if (!hotelId || !tara || !tipVacanta || !tipTransport || !nrPersoane || !durata || !dataCheckin || !prenume || !nume || !email || !telefon) {
    alert("CompleteazÄƒ toate cÃ¢mpurile!");
    return;
  }

  try {
    // ObÈ›ine ID destinaÈ›ie
    const destinatii = await fetch("http://localhost:8080/destinatii").then(r => r.json());
    const destinatie = destinatii.find(d => d.tara === tara && d.tip === tipVacanta);
    if (!destinatie) throw new Error("DestinaÈ›ie invalidÄƒ");

    // ObÈ›ine ID transport
    const transporturi = await fetch("http://localhost:8080/transporturi").then(r => r.json());
    const transport = transporturi.find(t => t.destinatie.id_destinatie === destinatie.id_destinatie && t.tipTransport === tipTransport);
    if (!transport) throw new Error("Transport invalid");

    // ObÈ›ine ID client
    const clienti = await fetch("http://localhost:8080/clienti").then(r => r.json());
    const client = clienti.find(c =>
      c.nume === nume &&
      c.prenume === prenume &&
      c.email === email &&
      c.telefon === telefon
    );
    if (!client) throw new Error("Clientul nu a fost gÄƒsit Ã®n baza de date");

    // CalculeazÄƒ data checkout
    const dataCheckinDate = new Date(dataCheckin);
    const dataCheckoutDate = new Date(dataCheckinDate);
    dataCheckoutDate.setDate(dataCheckinDate.getDate() + durata);
    const dataCheckout = dataCheckoutDate.toISOString().slice(0, 10);

    // Preia preÈ› total
    const pretTotal = document.getElementById("totalVacantaInput").value;
    const pretCurat = parseFloat(pretTotal.replace(/[^\d.]/g, ""));

    // Trimite rezervarea
    const rezervare = {
  hotel: { id_hotel: parseInt(hotelId) },
  transport: { id_transport: transport.id_transport },
  destinatie: { id_destinatie: destinatie.id_destinatie },
  client: { id_client: client.id_client },
  data_checkin: dataCheckin,
  data_checkout: dataCheckout,
  nr_nopti: durata,
  nr_persoane: nrPersoane,
  pret_total: pretCurat,
  status: "ÃŽn_aÈ™teptare"
};

const raspuns = await fetch("http://localhost:8080/rezervari", {
  method: "POST",
  headers: {
    "Content-Type": "application/json",
  },
  body: JSON.stringify(rezervare)
});

    if (raspuns.ok) {
      alert("Rezervarea a fost trimisÄƒ cu succes!");
    } else {
      const err = await raspuns.text();
      alert("Eroare la trimiterea rezervÄƒrii:\n" + err);
    }
  } catch (err) {
    console.error(err);
    alert("Eroare: " + err.message);
  }
}


        </script>
    <!--==============================
    All Js File
============================== -->
    <!-- Jquery -->
    <!-- Jquery -->
    <script src="assets/js/vendor/jquery-3.6.0.min.js"></script>
    <!-- Swiper Js -->
    <script src="assets/js/swiper-bundle.min.js"></script>
    <!-- Bootstrap -->
    <script src="assets/js/bootstrap.min.js"></script>
    <!-- Magnific Popup -->
    <script src="assets/js/jquery.magnific-popup.min.js"></script>
    <!-- Counter Up -->
    <script src="assets/js/jquery.counterup.min.js"></script>
    <!-- Range Slider -->
    <script src="assets/js/jquery-ui.min.js"></script>
    <!-- imagesloaded -->
    <script src="assets/js/imagesloaded.pkgd.min.js"></script>
    <!-- isotope -->
    <script src="assets/js/isotope.pkgd.min.js"></script>
    <!-- gsap -->
    <script src="assets/js/gsap.min.js"></script>

    <!-- circle-progress -->
    <script src="assets/js/circle-progress.js"></script>

    <script src="assets/js/matter.min.js"></script>
    <script src="assets/js/matterjs-custom.js"></script>


    <!-- nice select -->
    <script src="assets/js/nice-select.min.js"></script>




    <!-- Main Js File -->
    <script src="assets/js/main.js"></script>
</body>

</html>