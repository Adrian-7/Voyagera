<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
   
    <h1>Lista Hotelurilor Disponibile</h1>
    <button onclick="fetchHotels()">Afișează Hotelurile</button>
    <div id="hotels-container"></div>

    <label for="country">Alege o țară:</label>
    <select id="country">
        <option value="Turcia">Turcia</option>
        <option value="Bulgaria">Bulgaria</option>
        <option value="Grecia">Grecia</option>
        <option value="Dubai (UAE)">Dubai (UAE)</option>
        <option value="Cipru">Cipru</option>
        <option value="Spania">Spania</option>
        <option value="Maldive">Maldive</option>
        <option value="Egipt">Egipt</option>
        <option value="România">România</option>
        <option value="Elveția">Elveția</option>
        <option value="Austria">Austria</option>
        <option value="Franța">Franța</option>
        <option value="Norvegia">Norvegia</option>
        <option value="Sri Lanka">Sri Lanka</option>
        <option value="Thailanda">Thailanda</option>
        <option value="Indonezia">Indonezia</option>
        <option value="Vietnam">Vietnam</option>
        <option value="Mauritius">Mauritius</option>
        <option value="Fiji">Fiji</option>
        <option value="Caraibe">Caraibe</option>
        <option value="Pacificul de Sud">Pacificul de Sud</option>
        <option value="Marea Mediterană">Marea Mediterană</option>
        <option value="Oceanul Indian">Oceanul Indian</option>
        <option value="Asia">Asia</option>
    </select>
    <button onclick="filterHotels()">Caută Hoteluri</button>
    
    <div id="results"></div>

    <script>
        async function fetchHotels() {
            try {
                const response = await fetch('http://localhost:8080/hoteluri');
                if (!response.ok) throw new Error("Eroare la preluarea datelor!");

                const hotels = await response.json();
                const container = document.getElementById('hotels-container');
                container.innerHTML = ''; // Șterge conținutul anterior

                hotels.forEach(hotel => {
                    const hotelDiv = document.createElement('div');
                    hotelDiv.classList.add('hotel');
                    hotelDiv.innerHTML = `
                        <h2>${hotel.nume_hotel}</h2>
                        <p><strong>Clasificare:</strong> ${hotel.clasificare} stele</p>
                        <p><strong>Preț pe noapte:</strong> ${hotel.pret_pe_noapte} EUR</p>
                    `;
                    container.appendChild(hotelDiv);
                });
            } catch (error) {
                console.error(error);
                alert("Eroare la încărcarea hotelurilor!");
            }
        }

        function filterHotels() {
    let country = document.getElementById("country").value;
    fetch(`http://localhost:8080/hoteluri/filtrare?tara=${encodeURIComponent(country)}`)
        .then(response => response.json())
        .then(data => {
            let resultsDiv = document.getElementById("results");
            resultsDiv.innerHTML = "";
            if (data.length === 0) {
                resultsDiv.innerHTML = "<p>Nu s-au găsit hoteluri.</p>";
            } else {
                let list = document.createElement("div");
                list.classList.add("hotel-list");

                data.forEach(hotel => {
                    let hotelCard = document.createElement("div");
                    hotelCard.classList.add("hotel-card");

                    // Crearea imaginii
                    let image = document.createElement("img");
                    image.src = hotel.imagine_hotel || "default_image.jpg"; // Imagine implicită în caz de eroare
                    image.alt = hotel.nume_hotel || "Hotel fără nume";

                    // Crearea informațiilor hotelului
                    let hotelInfo = document.createElement("div");
                    hotelInfo.classList.add("hotel-info");

                    let name = document.createElement("h3");
                    name.textContent = hotel.nume_hotel || "Hotel fără nume";
                    hotelInfo.appendChild(name);

                    let countryName = document.createElement("p");
                    countryName.textContent = hotel.tara || "Țara necunoscută";
                    hotelInfo.appendChild(countryName);

                    let price = document.createElement("p");
                    price.classList.add("price");
                    price.textContent = `${hotel.pret_pe_noapte || 0} RON/noapte`;
                    hotelInfo.appendChild(price);

                    let stars = document.createElement("p");
                    stars.classList.add("stars");
                    stars.textContent = `Clasificare: ${'★'.repeat(hotel.clasificare || 0)}`;
                    hotelInfo.appendChild(stars);

                    hotelCard.appendChild(image);
                    hotelCard.appendChild(hotelInfo);

                    list.appendChild(hotelCard);
                });

                resultsDiv.appendChild(list);
            }
        })
        .catch(error => {
            console.error("Eroare la preluarea datelor:", error);
            document.getElementById("results").innerHTML = "<p>Eroare la încărcarea datelor.</p>";
        });
}

        </script>            
</body>
</html>